"use strict";(self.webpackChunkit_react=self.webpackChunkit_react||[]).push([[467],{2467:function(e,t,s){s.r(t),s.d(t,{default:function(){return J}});var i=s(7853),r=s(4531),o=s(8932),n=s(2587),a="ProfileInfo_avatar__HIVpd",d=s(3445),u=s(4353),l="ProfileData_descriptionBlock__tmx8N",c=s(184),h=function(e){var t=e.profile,s=e.setEditMode,i=t.contacts,r=t.fullName,o=t.aboutMe,n=t.lookingForAJob,a=t.lookingForAJobDescription,d=Object.values(i||{});return(0,c.jsxs)("div",{className:l,children:[(0,c.jsx)("button",{onClick:function(){return s(!0)},children:"Edit profile"}),(0,c.jsx)("div",{children:r}),(0,c.jsx)("div",{children:o}),(0,c.jsx)("div",{children:n?"I'm looking for a job right now":"I don't need a job"}),(0,c.jsx)("div",{children:a}),(0,c.jsx)("span",{children:"Where you can find me: "}),d.map((function(e){return e&&(0,c.jsx)("div",{children:e},e)}))]})},p=s(6139),f=s(704),v=s(1117),j=s(7344),m=(0,f.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,s=e.error,i=e.initialValues,r=Object.entries(i.contacts||{});return(0,c.jsxs)("form",{onSubmit:t,children:[(0,c.jsx)("div",{children:(0,c.jsx)("button",{children:"Save changes"})}),s&&(0,c.jsx)("div",{className:j.Z.formSummaryError,children:s}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Full name"}),":",(0,c.jsx)("div",{children:(0,c.jsx)(p.Z,{placeholder:"Full name",name:"fullName",component:v.I,validate:[]})}),(0,c.jsx)("b",{children:"About me"}),":",(0,c.jsx)("div",{children:(0,c.jsx)(p.Z,{placeholder:"About me",name:"aboutMe",component:v.g,validate:[]})}),(0,c.jsx)("b",{children:"Looking for a job"}),":",(0,c.jsx)("div",{children:(0,c.jsx)(p.Z,{name:"lookingForAJob",component:v.I,validate:[],type:"checkbox"})}),(0,c.jsx)("b",{children:"My professional skills"}),":",(0,c.jsx)("div",{children:(0,c.jsx)(p.Z,{placeholder:"My professional skills",name:"lookingForAJobDescription",component:v.g,validate:[]})}),(0,c.jsx)("b",{children:"Where you can find me"}),":",r.map((function(e){return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{children:[e[0],":"]}),(0,c.jsx)("div",{children:(0,c.jsx)(p.Z,{name:"contacts.".concat(e[0],"}"),component:v.I,validate:[]})})]},e[0]+e[1])}))]})]})})),x=s(3430),g=s(2791),b=function(e){var t=e.status,s=e.updateStatus,i=(0,g.useState)(!1),r=(0,x.Z)(i,2),o=r[0],n=r[1],a=(0,g.useState)(t),d=(0,x.Z)(a,2),u=d[0],l=d[1];(0,g.useEffect)((function(){l(t)}),[t]);return o?(0,c.jsx)("div",{children:(0,c.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},value:u,autoFocus:!0,onBlur:function(){s(u),n(!1)}})}):(0,c.jsx)("div",{children:(0,c.jsx)("span",{onDoubleClick:function(){return n(!0)},children:t||"no status"})})},P=function(e){var t=e.profile,s=e.status,i=e.updateStatus,r=e.savePhoto,o=e.saveProfile,n=e.isOwner,l=e.isEditMode,p=e.setEditMode;if(!t)return(0,c.jsx)(d.p,{});return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:a,children:[(0,c.jsx)("img",{src:t.photos.large||u,alt:"user avatar"}),n&&(0,c.jsx)("input",{type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&r(e.target.files[0])}}),(0,c.jsx)(b,{status:s,updateStatus:i})]}),l?(0,c.jsx)(m,{initialValues:t,onSubmit:function(e){o(e)}}):(0,c.jsx)(h,{profile:t,setEditMode:p})]})},k=s(5531),M="MyPosts_postBlock__A8-bX",E="MyPosts_posts__D4CF1",S="Post_item__pT53g",y=function(e){var t=e.message,s=e.likeCount;return(0,c.jsxs)("div",{className:S,children:[(0,c.jsx)("img",{src:"https://99px.ru/sstorage/1/2012/06/image_10406120020582211120.gif",alt:"avatar image"}),t,(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{children:"like"})," ",s]})]})},_=s(3079),Z=(0,_.D)(10),I=(0,f.Z)({form:"profileAddPostForm"})((function(e){var t=e.handleSubmit;return(0,c.jsxs)("form",{onSubmit:t,children:[(0,c.jsx)("div",{children:(0,c.jsx)(p.Z,{placeholder:"Enter your post",name:"newPostBody",component:v.g,validate:[_.C,Z]})}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{children:"Add post"})})]})})),A=(0,g.memo)((function(e){var t=e.posts,s=e.addPost,i=(0,k.Z)(t).reverse().map((function(e){var t=e.id,s=e.message,i=e.likesCount;return(0,c.jsx)(y,{message:s,likeCount:i},t)}));return(0,c.jsxs)("div",{className:M,children:[(0,c.jsx)("h3",{children:"My posts"}),(0,c.jsx)(I,{onSubmit:function(e){return s(e.newPostBody)}}),(0,c.jsx)("div",{className:E,children:i})]})})),C=s(4294),N=s(7375),D=(0,N.$j)((function(e){return{posts:e.profilePage.posts}}),{addPost:C.ef.addPost})(A),w=function(e){var t=e.profile,s=e.status,i=e.updateStatus,r=e.isOwner,o=e.savePhoto,n=e.saveProfile,a=e.isEditMode,d=e.setEditMode;return(0,c.jsxs)("div",{children:[(0,c.jsx)(P,{profile:t,status:s,updateStatus:i,isOwner:r,savePhoto:o,saveProfile:n,isEditMode:a,setEditMode:d}),(0,c.jsx)(D,{})]})},F=s(9723),O=s(2789),U=s(2932),B=function(e){(0,o.Z)(s,e);var t=(0,n.Z)(s);function s(){return(0,i.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props,t=e.match,s=e.authorizedUserId,i=e.history,r=e.getUserProfile,o=e.getStatus,n=+t.params.userId;n||(n=s)||i.push("/login"),r(n),o(n)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,c.jsx)(w,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:+this.props.match.params.userId===this.props.authorizedUserId||!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,isEditMode:this.props.isEditMode,setEditMode:this.props.setEditMode})}}]),s}(g.Component),J=(0,O.qC)((0,N.$j)((function(e){return{profile:e.profilePage.profile,isEditMode:e.profilePage.isEditMode,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:C.et,getStatus:C.lR,updateStatus:C.Nf,savePhoto:C.Ju,saveProfile:C.Ii,setEditMode:C.ef.setEditMode}),F.EN,U.D)(B)},2932:function(e,t,s){s.d(t,{D:function(){return c}});var i=s(6515),r=s(3738),o=s(9723),n=s(7375),a=s(9447),d=s(184),u=["isAuth"],l=function(e){return{isAuth:e.auth.isAuth}};function c(e){return(0,n.$j)(l)((function(t){var s=t.isAuth,n=(0,r.Z)(t,u);return s?(0,d.jsx)(e,(0,i.Z)({},n)):(0,d.jsx)(o.l_,{to:a.m.LOGIN})}))}}}]);
//# sourceMappingURL=467.501c0ce1.chunk.js.map